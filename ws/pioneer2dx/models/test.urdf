<?xml version="1.0" encoding="utf-8"?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from model.xacro                    | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="pioneer2dx">
  <material name="chasis_gazebo">
    <color rgba="1 0 0 1"/>
  </material>
  <material name="ruedas_gazebo">
    <color rgba="0 0 0 1"/>
  </material>
  <link name="base_link"/>
  <joint name="base_link_to_chassis" type="fixed">
    <parent link="base_link"/>
    <child link="chassis"/>
    <origin rpy="0 0 0" xyz="-0.1 0 0"/>
    <!--<pose>-0.1 0 0 0 0 0</pose>-->
  </joint>
  <link name="chassis">
    <origin rpy="0 0 0" xyz="0 0 0.16"/>
    <inertial>
      <mass value="20.0"/>
      <inertia ixx="0.176" ixy="0" ixz="0" iyy="0.393" iyz="0" izz="0.473"/>
      <!-- Inertia of a cuboid, it depends on mass>-->
    </inertial>
    <collision name="chasis_collision">
      <geometry>
        <box size="0.445 0.277 0.17"/>
      </geometry>
    </collision>
    <visual name="chasis_visual">
      <origin rpy="0 0 0" xyz="0 0 0.04"/>
      <geometry>
        <mesh filename="package://pioneer2dx/meshes/chassis.dae"/>
      </geometry>
    </visual>
    <collision name="castor_collision">
      <origin rpy="0 0 0" xyz="-0.2 0 -0.10"/>
      <geometry>
        <sphere radius="0.04"/>
      </geometry>
      <surface>
        <friction>
          <ode>
            <mu>0</mu>
            <mu2>0</mu2>
            <slip1>0</slip1>
            <slip2>0</slip2>
          </ode>
        </friction>
      </surface>
    </collision>
    <visual name="castor_visual">
      <origin rpy="0 0 0" xyz="-0.20 0 -0.10"/>
      <geometry>
        <sphere radius="0.04"/>
      </geometry>
      <material name="chasis_gazebo"/>
    </visual>
  </link>
  <link name="left_wheel">
    <inertial>
      <mass value="1.5"/>
      <inertia ixx="4.55e-3" ixy="0.0" ixz="0.0" iyy="7.5e-3" iyz="0.0" izz="4.55e-3"/>
    </inertial>
    <collision name="left_collision">
      <origin rpy="1.57 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://pioneer2dx/meshes/wheel_v5.dae"/>
        <!--21.6cm de diametro por 8cm de ancho perfil esferico -->
      </geometry>
      <surface>
        <friction>
          <ode>
            <mu>1.0</mu>
            <mu2>1.0</mu2>
            <slip1>0</slip1>
            <slip2>0</slip2>
            <maxVel>0.0</maxVel>
            <minDepth>0.001</minDepth>
          </ode>
        </friction>
      </surface>
    </collision>
    <visual name="left_visual">
      <origin rpy="1.57 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="package://pioneer2dx/meshes/wheel_v5.dae"/>
        <!--21.6cm de diametro por 8cm de ancho perfil esferico -->
      </geometry>
    </visual>
  </link>
  <!-- <joint name="${name}_wheel_hinge" type="continuous" >
		<origin xyz="${position}" rpy="0 0 0"/>
		<parent link="chassis"/>
		<child link="${name}_wheel"/>
		<axis xyz="0 1 0"/>
		<limit effort="100" velocity="12" />
		<safety_controller k_velocity="10" />


	    <limit effort="30" velocity="1" lower="-7" upper="7" />
    </joint>-->
  <!--
    <gazebo reference="${name}_wheel">
		<axis>
			    <xyz>0 1 0</xyz>
			    <limit>
				    <velocity>0.2</velocity>
				    <effort>-1</effort>
			    </limit>
		</axis>
	<physics>
	    <provide_feedback>True</provide_feedback>
	</physics>
    </gazebo>-->
  <joint name="left_dc_motor" type="continuous">
    <parent link="chassis"/>
    <child link="left_wheel"/>
    <origin rpy="1.57 0 0" xyz="0.1 0.17 -0.037"/>
    <axis xyz="0 0 1"/>
    <!-- <axis xyz="0 0 0.2"/> -->
    <dynamics damping="0.005" friction="0.01"/>
  </joint>
  <gazebo reference="left_dc_motor">
    <provideFeedback>true</provideFeedback>
  </gazebo>
  <gazebo>
    <plugin filename="libgazebo_ros_dc_motor.so" name="motor_plugin">
      <motor_shaft_joint>left_dc_motor</motor_shaft_joint>
      <motor_wrench_frame>left_wheel</motor_wrench_frame>
      <command_topic>left_dc_motor/command</command_topic>
      <velocity_topic>left_dc_motor/velocity</velocity_topic>
      <encoder_topic>left_dc_motor/encoder</encoder_topic>
      <current_topic>left_dc_motor/current</current_topic>
      <supply_topic>left_dc_motor/supply_voltage</supply_topic>
      <publish_encoder>True</publish_encoder>
      <publish_velocity>True</publish_velocity>
      <publish_current>False</publish_current>
      <publish_motor_joint_state>True</publish_motor_joint_state>
      <update_rate>100.0</update_rate>
      <motor_nominal_voltage>24.0</motor_nominal_voltage>
      <moment_of_inertia>0.001</moment_of_inertia>
      <armature_damping_ratio>0.0001</armature_damping_ratio>
      <electromotive_force_constant>0.03</electromotive_force_constant>
      <electric_resistance>13.8</electric_resistance>
      <electric_inductance>0.001</electric_inductance>
      <gear_ratio>72.0</gear_ratio>
      <encoder_ppr>111</encoder_ppr>
      <rosDebugLevel>Debug</rosDebugLevel>
    </plugin>
  </gazebo>
  <!-- Fuente: http://gazebosim.org/tutorials?tut=ros_gzplugins -->
  <!-- Plugins -->
  <!-- camera -->
  <!--<xacro:Camara_config name="Camara_1"/>-->
  <!--<xacro:include filename="$(find pioneer2dx)/plugins/camera_stereo_plug.xacro"/>-->
  <!--<xacro:include filename="$(find pioneer2dx)/plugins/camera_stereo_plug_groundtruth.xacro"/>-->
  <!--<xacro:include filename="$(find pioneer2dx)/plugins/lidar_plug.xacro"/>-->
  <!--<xacro:lidar_link name="Lidar_horizontal" posrpy="0 0 0" posz="0.3"/>-->
  <!--<xacro:lidar_config name="Lidar_horizontal"/>-->
  <!--<xacro:lidar_link name="Lidar_vertical" posrpy="1.5 0 1.5" posz="0.4"/>
    <xacro:lidar_config name="Lidar_vertical"/>-->
  <!--<xacro:include filename="./plugins/differential_plug.xacro"/>-->
  <!--<xacro:include filename="$(find pioneer2dx)/plugins/transmition_velocity.xacro"/>-->
  <!--<xacro:include filename="$(find pioneer2dx)/plugins/transmition_effort.xacro"/>-->
  <!--<xacro:include filename="$(find pioneer2dx)/plugins/transmition_effort_manual.xacro"/>-->
  <!--  <plugin filename="libDiffDrivePlugin.so" name="diff_drive">
	      <left_joint>left_wheel_hinge</left_joint>
	      <right_joint>right_wheel_hinge</right_joint>
	      <torque>5</torque>
    </plugin> -->
</robot>
